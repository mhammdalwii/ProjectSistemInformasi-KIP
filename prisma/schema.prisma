generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

// Enum untuk Peran/Role
enum Role {
  ADMIN
  SISWA
}

// Enum untuk Status KIP (tidak berubah)
enum StatusKIP {
  PROSES
  DITERIMA
  DITOLAK
  BELUM_DIAJUKAN 
}

// Model USER (GABUNGAN)
// Ini akan menyimpan data Admin DAN Siswa
model User {
  id        String   @id @default(cuid())
  email     String   @unique // Untuk login
  password  String   // Untuk login
  role      Role     @default(SISWA) // Peran pengguna
  
  // Data Profil (wajib untuk siswa)
  name      String?
  nisn      String?  @unique
  kelas     String?
  
  // Data KIP (opsional)
  nomorKIP        String?  @unique
  tahunPenerimaan Int?
  
  // Status Verifikasi
  status    StatusKIP @default(BELUM_DIAJUKAN)
  
  // Dokumen Upload (menyimpan URL file)
  urlKK         String? // Kartu Keluarga
  urlKIP        String? // Kartu KIP (jika ada)
  urlKTPOrangTua String? // KTP Orang Tua
  urlAkta       String? // Akta Kelahiran
  urlSKTM       String? // Surat Ket. Tidak Mampu
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}